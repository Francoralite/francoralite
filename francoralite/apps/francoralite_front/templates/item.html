
{% extends "base.html" %}
{% load bootstrap3 %}
{% load i18n %}
{% load markdown_extra %}
{% load data_display %}


{% block javascript %}
  {{ block.super }}
  <script src="{{ STATIC_URL }}francoralite_front/js/locale.js" type="text/javascript"></script>
{% endblock %}


{% block stylesheets %}
  {{ block.super }}
{% endblock %}


{% block title_name %}
{% trans "Items" %}
{% endblock %}

{% block content %}

{% block title_buttons %}
{% endblock %}

{% block title %}
{{ block.super }}
{% endblock %}

<div class="fullpage">
{% if items|length > 0 %}
  <!-- Table to display the items -->
  <table class="listing">
  <tr>
      <th class="highlight">{% trans "Cote" %}</th>
      <th>{% trans "Nom" %}</th>
      {% if perms.keycloak.item_update %}
      <th>{% trans "Modifier" %}</th>
      {% endif %}
  </tr>
  {% for item in items %}
  <tr>
      <td class="highlight">
          <a href="/item/{{item.id }}">
            {{ item.code|upper }}</a>
      </td>
      <td>{{ item.title|safe }}</td>
      <td>
      {% if perms.keycloak.item_update %}
        <a href="{% url "item-edit" id=item.id %}" class="btn btn-default">
          <span class="glyphicon glyphicon-edit"></span> {% trans "Editer" %}
        </a>
      {% endif %}
      {% if perms.keycloak.item_delete %}
        <button type="button" class="btn btn-default"
            data-toggle="modal" data-target="#modalDelete"
            data-name="{{item.title}}"
            data-url="{% url "item-delete" id=item.id %}">
              <span class="glyphicon glyphicon-trash"></span> {% trans "Supprimer" %}
        </button>
      {% endif %}
      </td>
  </tr>
  {% endfor %}
</table>



{% if perms.keycloak.item_delete %}
	{% modal_delete %}
{% endif %}

{% else %}
    <p>{% trans "Il n'y a pas d'items" %}</p>
{% endif %}
</div>
{% endblock %}
