{% extends "location.html" %}
{% load bootstrap3 %}
{% load i18n %}
{% load data_display %}
{% load markdown_extra %}
{% load static %}

{# Load CSS and JavaScript #}
{% bootstrap_css %}
{% bootstrap_javascript %}

{% block javascript %}
  {{ block.super }}
  <script type="module" src="{% static "francoralite_front/js/webcomponents/map.js" %}"></script>
{% endblock %}

{% block stylesheets %}
  {{ block.super }}
  <style>
    francoralite-map {
      height: 500px;
      width: 100%;
      display: inline-block;
    }
   </style>
{% endblock %}

{% block title_name %}
   {{ block.super}} -
   {% if id %}
   {% trans "Modification" %}
   {% else %}
   {% trans "Création" %}
   {% endif %}
{% endblock %}

{% block content %}

{% block title_buttons %}
{% endblock %}

{% block title %}
  {{ block.super }}
{% endblock %}

<link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.4/dist/leaflet.css"
  integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA=="
  crossorigin=""/>
{{ form.media }}
<div class="container">
  {% if id %}
  <form action="{%url "location_gis-edit" id %}" method="POST">
  {% else %}
  <form action="{%url "location_gis-add" %}" method="POST">
  {% endif %}
    {% csrf_token %}
    <div>
      <div class="control-label">
        <label class="" for="id_name">{% trans "Carte" %}:</label>
      </div>
      <!-- The map -->
      {% if id %}
      <francoralite-map
      markers-url="/api/locationgis/{{id}}"
      ></francoralite-map>
      {% else %}
      <francoralite-map markers-url=""></francoralite-map>
      {% endif %}
    </div>
    <div class="block-grey">
      <h2>{% trans "Coordonnées" %}</h2>
      <div class="container_line">
        {% bootstrap_field form.latitude layout='vertical' %}
        {% bootstrap_field form.longitude layout='vertical' %}
      </div>
    </div>
    <div class="container_line">
        {% bootstrap_field form.code layout='vertical' %}
        {% bootstrap_field form.name layout='vertical' %}
    </div>
    <div >
      {% markdown_editor component=form.notes %}
    </div>
      {% buttons_form %}
  </form>
</div>


{% endblock %}
